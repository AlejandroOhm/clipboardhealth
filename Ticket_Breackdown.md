#Methodology

The highest priority ticket is to add the custom id field, which is the main feature request from the client Facilities. The next ticket is to update the report generation code to use the custom id field if it's available, as this is the key functionality that is needed for the custom id field to be useful. The third ticket is to update the report UI to display the custom id field if it's available, which is important to make it clear to facilities that their custom id is being used.

The fourth ticket is to add input validation for the custom id field, which is important to ensure that Facilities provide valid custom ids that can be used in the report generation. The last ticket is to write tests to verify the functionality of the feature, which is important to ensure that it works as expected and doesn't introduce any regressions.

##Top priority list

- Add custom id field for facilities to use when generating reports
- Update report generation code to use custom id field if provided, else use internal id
- Update report UI to display custom id field if available
- Add input validation for custom id field
- Write tests to verify functionality

#Ticket 1: Create Custom Agent IDs Endpoint
As a facility admin, I should be able to set custom IDs for agents that I work with so that I can refer to them by my own unique identifier in reports.

##Acceptance Criteria:

    - A new API endpoint /facilities/{facility_id}/agents/{agent_id}/custom-id should be created that allows facility admins to set a custom ID for the agent.
    - Custom ID should be unique across all agents for the facility.
    - Custom ID should be limited to a maximum of 20 characters.
    - Custom ID should be validated on the server-side to ensure it meets the requirements.
    - Custom ID should be saved in the database in the Agents table.
    - The response from the API should include the updated agent details including the newly set custom ID.

Effort estimate: 5-8 hours

#Ticket 2: Update Report Generation Function to use Custom Agent IDs
As a facility admin, I want to see custom IDs for agents in the reports that I generate, so that I can refer to them using my own unique identifier.

##Acceptance Criteria:

    - The generateReport function should be updated to use the custom ID instead of the internal database ID.
    - If a custom ID has not been set for the agent, the internal database ID should be used as a fallback.
    - The generated PDF should include the custom IDs next to the agent's name.
    - The tests for the generateReport function should be updated to ensure it uses the correct ID for each agent.

Effort estimate: 3-5 hours

#Ticket 3: Update Agent Search Function to use Custom Agent IDs
As a facility admin, I want to be able to search for agents using custom IDs so that I can easily find the agent I'm looking for.

##Acceptance Criteria:

    - The getShiftsByFacility function should be updated to accept a custom ID as a parameter in addition to the internal database ID.
    - The function should search for shifts based on both the custom ID and the internal database ID.
    - If a custom ID has been set for an agent, it should be used to filter the shifts returned by the function.
    - The tests for the getShiftsByFacility function should be updated to ensure it searches for shifts using both the custom ID and the internal database ID.

Effort estimate: 3-5 hours

#Ticket 4: Add Custom Agent ID to Shift Metadata
As a facility admin, I want to see custom IDs for agents in the shift metadata so that I can easily refer to the agent by my own unique identifier.

##Acceptance Criteria:

    - The getShiftsByFacility function should be updated to include the custom ID in the metadata returned for each shift.
    - The custom ID should be included in the PDF generated by the generateReport function.
    - The tests for the getShiftsByFacility function should be updated to ensure it returns the correct custom ID in the shift metadata.
    - Effort estimate: 2-3 hours
